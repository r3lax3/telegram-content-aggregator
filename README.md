# Telegram Content Aggregator

Микросервисная система для автоматического сбора, хранения и дистрибуции контента из Telegram-каналов в свои каналы.

## Что делает

Scrapper-сервис периодически собирает посты из открытых Telegram-каналов (текст, изображения, видео), сохраняет их в базу и отдаёт через REST API. Bot-сервис по расписанию забирает свежий контент, фильтрует рекламу, чистит внешние ссылки и публикует в целевые каналы.

## Стек

- **Python 3.9+** / asyncio
- **FastAPI** — REST API скраппера
- **Aiogram 3** — Telegram-бот
- **Playwright** — headless-браузер для сбора данных
- **SQLAlchemy 2 + asyncpg** — ORM и асинхронная работа с PostgreSQL
- **RabbitMQ (aio-pika)** — межсервисное взаимодействие через очередь событий
- **Dishka** — dependency injection
- **APScheduler** — планировщик задач (публикация по расписанию)
- **Docker Compose** — оркестрация всех сервисов

## Архитектура

```
Источник → [Scrapper] → PostgreSQL → REST API → [Bot] → Целевые каналы
                              ↑                      |
                              └── RabbitMQ ──────────┘
```

Сервисы общаются через RabbitMQ (например, бот помечает пост как использованный, скраппер получает событие и обновляет БД). Каждый сервис имеет свою базу данных и запускается в отдельном контейнере.

## Запуск

```bash
cp scrapper.env.example scrapper.env  # заполнить конфиг скраппера
cp bot.env.example bot.env            # заполнить конфиг бота
docker compose up -d
```
